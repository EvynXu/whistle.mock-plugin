# URL重定向功能UI原型设计

## 概述

本文档提供了URL重定向功能的UI原型设计指南，包括主要界面、交互流程和视觉设计建议。

## 1. 主要界面

### 1.1 URL重定向列表页面

**布局设计**：

```
+----------------------------------------------------------------------+
| Whistle.mock-plugin                                                  |
+----------------------------------------------------------------------+
|                                                                      |
| URL重定向配置                                          [+ 添加重定向] |
| 配置URL重定向规则，支持多种匹配模式和参数处理      [导入] [导出] [筛选▼] |
|                                                                      |
| +--------------------------------------------------------------------+
| | [搜索框.............................................] [搜索] [重置] |
| +--------------------------------------------------------------------+
|                                                                      |
| +--------------------------------------------------------------------+
| | 状态 | 源URL             | 目标URL            | 描述     | 匹配方式 | 操作 |
| |------|------------------|-------------------|----------|----------|------|
| | [✓]  | api.example.com/ | localhost:3000/   | 接口测试 | 精确     | [...] |
| | [✓]  | api.prod.com/*   | api.test.com/*    | 测试环境 | 通配符   | [...] |
| | [ ]  | api.v1.*/users   | api.v2.*/users    | API迁移  | 正则     | [...] |
| |------|------------------|-------------------|----------|----------|------|
| |      |                  |                   |          |          |      |
| +--------------------------------------------------------------------+
|                                                                      |
| [< 上一页] 1/5 [下一页 >]                              [每页显示: 10 ▼] |
+----------------------------------------------------------------------+
```

**交互元素**：

1. **添加重定向按钮**：点击打开创建新规则的表单对话框
2. **导入/导出按钮**：提供导入和导出功能
3. **筛选下拉菜单**：包含状态筛选、匹配方式筛选等选项
4. **搜索栏**：支持按URL或描述搜索
5. **规则列表**：
   - 状态开关：点击切换规则启用/禁用状态
   - 操作下拉菜单：包含编辑、删除、测试等选项
6. **分页控制**：翻页和每页显示数量控制

### 1.2 创建/编辑规则表单

**布局设计**：

```
+--------------------------------------------------------------+
| 添加URL重定向                                          [X]    |
+--------------------------------------------------------------+
|                                                              |
| 基本信息                                                     |
| +------------------------------------------------------------+
| | 源URL *                                                    |
| | [https://api.example.com/path                          ]   |
| | 帮助提示：需要重定向的原始URL，支持多种匹配模式              |
| +------------------------------------------------------------+
|                                                              |
| +------------------------------------------------------------+
| | 目标URL *                                                  |
| | [http://localhost:3000/mock/path                       ]   |
| | 帮助提示：重定向的目标地址                                  |
| +------------------------------------------------------------+
|                                                              |
| +------------------------------------------------------------+
| | 描述（可选）                                               |
| | [将线上API重定向到本地测试服务器                        ]   |
| +------------------------------------------------------------+
|                                                              |
| +------------------------------------------------------------+
| | 状态                                                       |
| | [✓] 启用                                                   |
| +------------------------------------------------------------+
|                                                              |
| 高级选项 [▼]                                                 |
| +------------------------------------------------------------+
| | 匹配模式                                                   |
| | (○) 精确匹配  ( ) 前缀匹配  ( ) 正则表达式  ( ) 通配符     |
| +------------------------------------------------------------+
|                                                              |
| +------------------------------------------------------------+
| | 参数处理                                                   |
| | [✓] 保留原始URL参数                                        |
| |                                                            |
| | 自定义参数：                             [+ 添加参数]      |
| | +--------------------------------------------------------+ |
| | | 参数名 | 参数值        | 操作        | 操作             | |
| | |--------|---------------|-------------|----------------| |
| | | token  | abc123        | 添加/修改   | [删除]          | |
| | | debug  | true          | 添加/修改   | [删除]          | |
| | +--------------------------------------------------------+ |
| +------------------------------------------------------------+
|                                                              |
| +------------------------------------------------------------+
| | 请求头处理                                   [+ 添加请求头] |
| | +--------------------------------------------------------+ |
| | | 请求头     | 值           | 操作        | 操作           | |
| | |------------|--------------|-------------|---------------| |
| | | User-Agent | Custom Agent | 添加/修改   | [删除]         | |
| | +--------------------------------------------------------+ |
| +------------------------------------------------------------+
|                                                              |
| +------------------------------------------------------------+
| | 重定向类型                                                 |
| | (○) 服务器端重定向  ( ) 客户端重定向(返回30x状态码)        |
| +------------------------------------------------------------+
|                                                              |
| +------------------------------------------------------------+
| | 条件匹配                                     [+ 添加条件]  |
| | +--------------------------------------------------------+ |
| | | 类型   | 名称    | 值        | 操作符      | 操作        | |
| | |--------|---------|-----------|-------------|------------| |
| | | 方法   | -       | POST      | 等于        | [删除]      | |
| | +--------------------------------------------------------+ |
| +------------------------------------------------------------+
|                                                              |
| [  取消  ]                                      [  保存  ]   |
+--------------------------------------------------------------+
```

**交互元素**：

1. **基本信息区域**：必填项和常用配置
2. **高级选项折叠面板**：默认折叠，点击展开显示高级配置
3. **匹配模式单选按钮**：只能选择一种匹配模式
4. **参数和请求头表格**：支持添加、编辑和删除
5. **条件匹配表格**：支持添加多个条件进行匹配
6. **取消/保存按钮**：控制表单提交

### 1.3 规则测试工具

**布局设计**：

```
+--------------------------------------------------------------+
| 测试重定向规则                                         [X]    |
+--------------------------------------------------------------+
|                                                              |
| +------------------------------------------------------------+
| | 测试URL *                                                  |
| | [https://api.example.com/users?id=123                  ]   |
| +------------------------------------------------------------+
|                                                              |
| +------------------------------------------------------------+
| | 请求方法                                                   |
| | [GET ▼]                                                    |
| +------------------------------------------------------------+
|                                                              |
| +------------------------------------------------------------+
| | 请求头                                        [+ 添加]     |
| | +--------------------------------------------------------+ |
| | | 名称         | 值                  | 操作                | |
| | |--------------|---------------------|---------------------| |
| | | Content-Type | application/json    | [删除]              | |
| | +--------------------------------------------------------+ |
| +------------------------------------------------------------+
|                                                              |
| +------------------------------------------------------------+
| | 请求体                                                     |
| | +--------------------------------------------------------+ |
| | | { "name": "test", "age": 30 }                          | |
| | +--------------------------------------------------------+ |
| +------------------------------------------------------------+
|                                                              |
| [  测试  ]                                                   |
|                                                              |
| 测试结果                                                     |
| +------------------------------------------------------------+
| | 匹配状态: ✅ 已匹配到规则                                  |
| | 匹配的规则: Rule #2 - API测试环境                          |
| |                                                            |
| | 重定向结果:                                                |
| | 从: https://api.example.com/users?id=123                   |
| | 到: http://localhost:3000/mock/users?id=123                |
| |                                                            |
| | 应用的条件:                                                |
| | - 请求方法: GET                                            |
| |                                                            |
| | 应用的参数:                                                |
| | - 保留原始参数: id=123                                     |
| | - 添加参数: token=abc123                                   |
| +------------------------------------------------------------+
|                                                              |
| [  关闭  ]                                                   |
+--------------------------------------------------------------+
```

**交互元素**：

1. **测试表单**：输入测试URL和其他请求信息
2. **测试按钮**：触发测试请求
3. **测试结果面板**：显示匹配和重定向结果
4. **关闭按钮**：关闭测试对话框

## 2. 视觉设计指南

### 2.1 颜色方案

- **主色调**：#1890ff（蓝色，与Ant Design一致）
- **成功色**：#52c41a（绿色）
- **警告色**：#faad14（黄色）
- **错误色**：#f5222d（红色）
- **背景色**：#f0f2f5（浅灰色）
- **文本色**：#000000d9（主文本，85%黑）
- **次要文本色**：#00000073（次要文本，45%黑）

### 2.2 图标使用

- **添加操作**：使用 "+" 图标
- **编辑操作**：使用铅笔图标
- **删除操作**：使用垃圾桶图标
- **启用状态**：使用开关组件
- **测试操作**：使用箭头循环图标
- **导入/导出**：使用上传/下载图标

### 2.3 排版

- **标题**：16px, 粗体
- **正文**：14px, 常规
- **标签**：12px, 常规
- **帮助文本**：12px, 浅色

### 2.4 组件样式

- **按钮**：遵循Ant Design按钮样式
  - 主按钮：蓝色填充
  - 次要按钮：白色边框
  - 危险按钮：红色
- **表单元素**：统一高度和内边距
- **表格**：条纹样式，悬停高亮
- **分页**：简洁设计，清晰显示页码

## 3. 响应式设计

### 3.1 桌面视图

- 全功能视图，如上述原型所示
- 表格完整显示所有列

### 3.2 平板视图

- 表格减少可见列，优先显示重要信息
- 高级选项在表单中保持垂直排列

### 3.3 移动视图

- 卡片式替代表格布局
- 表单字段垂直堆叠
- 高级选项逐个分组展示

## 4. 交互流程

### 4.1 创建新规则

1. 用户点击"添加重定向"按钮
2. 打开创建规则表单对话框
3. 用户填写必要信息（源URL和目标URL）
4. 根据需要配置高级选项
5. 点击"保存"按钮提交表单
6. 系统验证表单，成功后关闭对话框并在列表中显示新规则
7. 显示成功通知

### 4.2 编辑现有规则

1. 用户点击规则行中的"编辑"按钮
2. 打开编辑规则表单对话框，预填充现有规则数据
3. 用户修改所需字段
4. 点击"保存"按钮提交更新
5. 系统验证表单，成功后关闭对话框并更新列表中的规则
6. 显示成功通知

### 4.3 测试规则

1. 用户点击规则行中的"测试"按钮
2. 打开测试工具对话框，预填充规则的源URL
3. 用户可根据需要修改测试参数
4. 点击"测试"按钮
5. 系统执行测试并显示结果
6. 用户查看测试结果，完成后点击"关闭"按钮

## 5. 辅助功能考虑

- 所有表单字段都有适当的标签
- 错误消息清晰可见
- 颜色对比度符合WCAG 2.0 AA级标准
- 所有交互元素都可以通过键盘访问
- 提供足够的指导文本和工具提示 